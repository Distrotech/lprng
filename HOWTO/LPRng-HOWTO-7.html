<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> LPRng-HOWTO: Client To Server Connection Information</TITLE>
 <LINK HREF="LPRng-HOWTO-8.html" REL=next>
 <LINK HREF="LPRng-HOWTO-6.html" REL=previous>
 <LINK HREF="LPRng-HOWTO.html#toc7" REL=contents>
</HEAD>
<BODY>
<A HREF="LPRng-HOWTO-8.html">Next</A>
<A HREF="LPRng-HOWTO-6.html">Previous</A>
<A HREF="LPRng-HOWTO.html#toc7">Contents</A>
<HR>
<H2><A NAME="s7">7. Client To Server Connection Information</A></H2>

<P>The LPRng software is a true set of client/server applications.
The LPRng clients,
<CODE>lpr, lprm, lpq,</CODE> and <CODE>lpc</CODE> connect to a <CODE>lpd</CODE> server using a
TCP/IP connection.
This means that you must have TCP/IP networking enabled on your workstation
to use LPRng.
<P>However,
you do not need to have an external network connection to the Internet.
For most single system users,
the <CODE>lpd</CODE> server is running on the same workstation as the client program,
and the clients will simply talk to the <CODE>localhost</CODE>.
<H2><A NAME="forcelocalhost"></A> <A NAME="defaultprinterwhenunknown"></A> <A NAME="defaultprinter"></A> <A NAME="defaulthost"></A> <A NAME="PRINTER"></A> <A NAME="printerenv"></A> <A NAME="ss7.1">7.1 Printer Name and Server IP Address</A>
</H2>

<P>Options used:
<UL>
<LI> <CODE>PRINTER</CODE><EM>&nbsp;&nbsp;Environment variable </EM></LI>
<LI> <CODE>force_localhost</CODE><EM>&nbsp;&nbsp;force clients to send requests to localhost </EM></LI>
<LI> <CODE>default_printer_when_unknown</CODE>&nbsp;&nbsp; <EM>used by LPD when printer name not in printcap </EM></LI>
</UL>
<P>When an LPRng client such as
<CODE>lpr</CODE>,
<CODE>lpq</CODE>,
<CODE>lprm</CODE>,
or
<CODE>lprc</CODE>
needs to communicate with a print server,
the only information they normally need is:
<OL>
<LI>The spool queue or <I>remote printer</I>
to be used in requests to the <CODE>lpd</CODE> print server.
This is sometimes referred to as the <I>printer</I> or <I>print queue</I> name.</LI>
<LI>The IP address or hostname of the <I>print server</I> or <I>remote server</I>.
This is sometimes called the <I>remote host</I> or simply <I>server</I>.</LI>
<LI>Options that control <EM>how</EM> jobs or commands are transferred to the server host.
These options might include encryption and client side job filtering.
We will discuss these capabilities later.</LI>
</OL>
<P>LPRng has several ways to specify the <I>printer queue</I> and <I>server</I> information.
<H3>Command Line -Pprinter@host</H3>

<P>The <CODE>-P printer@host</CODE> option specifies both the print queue and
server.
<BLOCKQUOTE><CODE>
<PRE>
lpr -Plaser@10.0.0.1
lpq -Plp@myserver
</PRE>
</CODE></BLOCKQUOTE>
<P>When used as a command line option,
the printcap database will not be consulted for other options or information.
This allows LPRng clients to function without a printcap database,
and without a <CODE>lpd</CODE> print server running on their local host.
However,
options set in the <CODE>/etc/lpd.conf/</CODE> and the compile time defaults
will still be used.
<H3>Command Line -Pprinter</H3>

<P>This form will cause the LPRng clients to look in the
<CODE>/etc/printcap</CODE>
for a printcap entry with the name or alias <CODE>printer</CODE>
and use the information in that printcap entry.
We will discuss the format of the printcap entry in a moment.
Example:
<BLOCKQUOTE><CODE>
<PRE>
lpr -Plp
</PRE>
</CODE></BLOCKQUOTE>
<H3>PRINTER Environment Variable</H3>

<P>If no command line option is specified,
the LPRng clients will check for a <CODE>PRINTER</CODE> environment variable value
and will use it as though specified as a
<CODE>-P$PRINTER</CODE> command line option.
<P>If the $PRINTER value has the form
<CODE>printer@host</CODE> the print queue will be <CODE>printer</CODE> on server <CODE>host</CODE>.
and not consult the printcap database
If the $PRINTER value has the form <CODE>printer</CODE> then the printcap will be searched
for a <CODE>printer</CODE> printcap entry.
For example:
<BLOCKQUOTE><CODE>
<PRE>
export PRINTER=laser@10.0.0.1; lpr
export PRINTER=pr; lpr
</PRE>
</CODE></BLOCKQUOTE>
<H3>Default Printer From Printcap</H3>

<P>If you do not specify a printer on the command line or in the <CODE>PRINTER</CODE>
environment variable,
then LPRng will search the printcap and use the first valid printcap entry
as the printer.
<H3>Default Printer When No Printcap</H3>

<P>If you do not have a <CODE>/etc/printcap</CODE> file,
then LPRng will use the
<CODE>default_printer</CODE>
and
<CODE>default_remote_host</CODE>
<I>fallback</I>
values set in the <CODE>/etc/lpd.conf</CODE> file or by the compile time defaults.
<P>Using the fallback values is usually not a desirable event and may indicate
that you have a misconfigured host, so the fallback values are usually set
by administrators to <CODE>missingprinter@localhost</CODE> to provoke an annoying message for users.
<H3>LPD Default Printer</H3>

<P>For completeness,
there is even a <CODE>default_printer_when_unknown</CODE> configuration
entry for use by LPD when it is given a printer name not in its printcap
database.
By default,
it will look up this name in the database and treat the job as though it was
sent to this printer.
<H2><A NAME="ss7.2">7.2 LPD Server Runnning on Localhost</A>
</H2>

<P>Workstations for personal use or in extremely simple configurations
will always run an <CODE>lpd</CODE> server on the <I>localhost</I>.
This is the most common situation for the majority of new
users,
and the
default LPRng installation sets the default value of the
<CODE>force_localhost</CODE> configuration parameter to <B>TRUE</B> or to 1.
The
<CODE>lpr</CODE>
<CODE>lpq</CODE>
<CODE>lprm</CODE>
and
<CODE>lpc</CODE> will connect to <CODE>localhost</CODE> (usually IP address 127.0.0.1)
unless explicitly overridden by the command line <CODE>-Pprinter@host</CODE> argument.
<P>Larger sites or organizations which want to use a central print server
to handle multiple printers or printer sharing
may want the clients to connect directly to the server.
In this case the system administrator should set
<CODE>force_localhost@</CODE> in the
<CODE>/etc/lpd.conf</CODE> or modify the compile time default.
See 
<A HREF="LPRng-HOWTO-8.html#lp">Simple Client Printcap Entry</A>
for ways to change this.
<HR>
<A HREF="LPRng-HOWTO-8.html">Next</A>
<A HREF="LPRng-HOWTO-6.html">Previous</A>
<A HREF="LPRng-HOWTO.html#toc7">Contents</A>
</BODY>
</HTML>
