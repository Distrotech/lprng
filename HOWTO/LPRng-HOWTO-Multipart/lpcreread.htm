<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <title>LPC Requests</title>
    <meta name="GENERATOR" content=
    "Modular DocBook HTML Stylesheet Version 1.71 ">
    <link rel="HOME" title=" LPRng-HOWTO" href="index.htm">
    <link rel="UP" title="RFC 1179 - Line Printer Daemon Protocol "
    href="rfc1179ref.htm">
    <link rel="PREVIOUS" title="lprm Requests" href="x10233.htm">
    <link rel="NEXT" title="Block Job Transfer" href=
    "sendblockformat.htm">
  </head>

  <body class="SECT1" bgcolor="#FFFFFF" text="#000000" link=
  "#0000FF" vlink="#840084" alink="#0000FF">
    <div class="NAVHEADER">
      <table summary="Header navigation table" width="100%" border=
      "0" cellpadding="0" cellspacing="0">
        <tr>
          <th colspan="3" align="center">LPRng-HOWTO: 1 Apr 2002
          (For LPRng-3.8.10)</th>
        </tr>

        <tr>
          <td width="10%" align="left" valign="bottom"><a href=
          "x10233.htm" accesskey="P">Prev</a></td>

          <td width="80%" align="center" valign="bottom">Chapter
          19. RFC 1179 - Line Printer Daemon Protocol</td>

          <td width="10%" align="right" valign="bottom"><a href=
          "sendblockformat.htm" accesskey="N">Next</a></td>
        </tr>
      </table>
      <hr align="LEFT" width="100%">
    </div>

    <div class="SECT1">
      <h1 class="SECT1"><a name="LPCREREAD">19.8. LPC
      Requests</a></h1>

      <p><b class="APPLICATION">LPRng</b> has extended the RFC1179
      protocol to allow queue and printer control commands to be
      sent to the <b class="APPLICATION">lpd</b> server. The format
      of these commands are:</p>

      <div class="INFORMALEXAMPLE">
        <a name="AEN10254"></a>
<pre class="SCREEN">
    \006printer user key [options]
</pre>
      </div>
      <br>
      <br>

      <p>The following commands are supported.</p>

      <div class="TABLE">
        <a name="LPCCOMMANDS"></a>

        <p><b>Table 19-3. LPC Commands</b></p>

        <table border="1" class="CALSTABLE">
          <thead>
            <tr>
              <th align="LEFT" valign="TOP">Command</th>

              <th align="LEFT" valign="TOP">Operation</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td align="LEFT" valign="TOP">Command</td>

              <td align="LEFT" valign="TOP">Operation</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">active [printer[@host]]</tt></td>

              <td align="LEFT" valign="TOP">check to see if server
              accepting connections</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">abort (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">terminate server
              process printing job</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">disable (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">disable queueing</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">debug (printer[@host] | all)
              debugparms</tt> </td>

              <td align="LEFT" valign="TOP">set debug level for
              printer</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">enable (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">enable queueing</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">hold (printer[@host] | all) (name[@host] |
              job | all)*</tt> </td>

              <td align="LEFT" valign="TOP">hold job</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">holdall (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">hold all jobs on</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">kill (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">stop and restart
              server</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class="LITERAL">lpd
              [printer[@host]]</tt> </td>

              <td align="LEFT" valign="TOP">get <b class=
              "APPLICATION">lpd</b> PID for server</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class="LITERAL">lpq
              (printer[@host] | all) (name[@host] | job |
              all)*</tt> </td>

              <td align="LEFT" valign="TOP">invoke <b class=
              "APPLICATION">lpq</b></td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">lprm (printer[@host] | all)
              (name[@host]|host|job| all)*</tt> </td>

              <td align="LEFT" valign="TOP">invoke <b class=
              "APPLICATION">lprm</b></td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">move printer (user|jobid)* target</tt>
              </td>

              <td align="LEFT" valign="TOP">move jobs to new
              queue</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">noholdall (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">hold all jobs off</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">printcap (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">report printcap
              values</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">quit</tt> </td>

              <td align="LEFT" valign="TOP">exit LPC</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">redirect (printer[@host] | all)
              (printer@host | off )*</tt> </td>

              <td align="LEFT" valign="TOP">redirect jobs</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">release (printer[@host] | all) (name[@host]
              | job | all)*</tt> </td>

              <td align="LEFT" valign="TOP">release job</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">reread [printer[@host]]</tt></td>

              <td align="LEFT" valign="TOP"><b class=
              "APPLICATION">lpd</b> reread database
              information</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">start (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">start printing</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">status (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">status of printers</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">stop (printer[@host] | all)</tt> </td>

              <td align="LEFT" valign="TOP">stop printing</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">topq (printer[@host] | all) (name[@host] |
              job | all)*</tt> </td>

              <td align="LEFT" valign="TOP">reorder job</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">defaultq</tt> </td>

              <td align="LEFT" valign="TOP">default queue for <b
              class="APPLICATION">lpd</b> server</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">local (printer | all)</tt> </td>

              <td align="LEFT" valign="TOP">client printcap and
              configuration information</td>
            </tr>

            <tr>
              <td align="LEFT" valign="TOP"><tt class=
              "LITERAL">server (printer | all)</tt> </td>

              <td align="LEFT" valign="TOP">server printcap and
              configuration information</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p>Many of these commands support extremely specialized
      operations for print queue management, However, the following
      are the most commonly used and are supported by the BSD <b
      class="APPLICATION">lpd</b> print spooling system as
      well:</p>

      <ul>
        <li>
          <p><tt class="LITERAL">start, stop, enable, disable</tt>
          Start and stop will start and stop printing for a
          specified queue. Enable and disable enable and disable
          sending and/or accepting jobs for the queue.</p>
        </li>

        <li>
          <p><tt class="LITERAL">abort, kill</tt> Abort will cause
          the process doing the actual job printing to be
          terminated. Kill does an abort, and then restarts the
          printing process. These commands are used to restart a
          queue printing after some disaster.</p>
        </li>

        <li>
          <p><tt class="LITERAL">topq</tt> Places selected jobs at
          the top of the print queue.</p>
        </li>

        <li>
          <p><tt class="LITERAL">status</tt> Shows a status display
          of the print spools on the server.</p>
        </li>
      </ul>
      <br>
      <br>

      <p>The following commands are extensions to the basic set
      provided by the BSD <b class="APPLICATION">lpd</b>
      system.</p>

      <ul>
        <li>
          <p><tt class="LITERAL">lpq, lprm</tt> Invokes the lpq or
          lprm program from lpc. Useful when in the interactive
          mode.</p>
        </li>

        <li>
          <p><tt class="LITERAL">hold, holdall, release</tt> The
          hold command will cause the selected jobs to be held
          until released. The holdall jobs sets all jobs submitted
          to the queue to be held until released. The release
          command releases jobs for printing. If a job has had an
          error and is in the error state, the release command will
          cause it to be reprinted.</p>
        </li>

        <li>
          <p><tt class="LITERAL">move, redirect</tt> The move
          command will move selected jobs to the specified spool
          queue. The redirect command sends all jobs submitted to
          the queue to be sent to the specified queue.</p>
        </li>

        <li>
          <p><tt class="LITERAL">active, lpd, reread</tt> The
          active command will connect to the server for the
          printer. This is used to check to see if non-<b class=
          "APPLICATION">LPRng</b> print servers are active. The lpd
          command will connect to the server and get the process id
          (PID) of the <b class="APPLICATION">lpd</b> server. The
          reread command causes a SIGHUP signal to be sent to the
          lpd process, causing it to reread the <tt class=
          "FILENAME">lpd.conf</tt>, <tt class=
          "FILENAME">printcap</tt>, and <tt class=
          "FILENAME">lpd.perms</tt> files. This is done when
          configuration information has been modified and the
          administrator wants to have the server use the new
          information.</p>
        </li>

        <li>
          <p><tt class="LITERAL">debug</tt> This is a desperation
          facility for developers that allows dynamic enabling of
          debug information generation. Not normally used in
          general operation.</p>
        </li>

        <li>
          <p><tt class="LITERAL">local, server</tt> These commands
          will print out the configuration information in the local
          <tt class="FILENAME">lpd.conf</tt> file, as well as the
          printcap information for the specified printers; <tt
          class="LITERAL">client</tt> prints what the <b class=
          "APPLICATION">LPRng</b> clients (<tt class="LITERAL">lpr,
          lpq, ...</tt>) would use while <tt class=
          "LITERAL">server</tt> prints what the <b class=
          "APPLICATION">LPRng</b> server (<b class=
          "APPLICATION">lpd</b>) would use if running on this host.
          This is an extremely useful diagnostic tool for
          administrators. Not normally used in general
          operation.</p>
        </li>
      </ul>
      <br>
      <br>
    </div>

    <div class="NAVFOOTER">
      <hr align="LEFT" width="100%">

      <table summary="Footer navigation table" width="100%" border=
      "0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="33%" align="left" valign="top"><a href=
          "x10233.htm" accesskey="P">Prev</a></td>

          <td width="34%" align="center" valign="top"><a href=
          "index.htm" accesskey="H">Home</a></td>

          <td width="33%" align="right" valign="top"><a href=
          "sendblockformat.htm" accesskey="N">Next</a></td>
        </tr>

        <tr>
          <td width="33%" align="left" valign="top"><b class=
          "APPLICATION">lprm</b> Requests</td>

          <td width="34%" align="center" valign="top"><a href=
          "rfc1179ref.htm" accesskey="U">Up</a></td>

          <td width="33%" align="right" valign="top">Block Job
          Transfer</td>
        </tr>
      </table>
    </div>
  </body>
</html>

