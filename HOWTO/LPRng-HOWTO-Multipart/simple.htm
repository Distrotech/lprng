<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <title>Simple Client Printcap Entry&#13;</title>
    <meta name="GENERATOR" content=
    "Modular DocBook HTML Stylesheet Version 1.71 ">
    <link rel="HOME" title=" LPRng-HOWTO" href="index.htm">
    <link rel="UP" title="Printcap Database " href=
    "printcapref.htm">
    <link rel="PREVIOUS" title="Printcap Database " href=
    "printcapref.htm">
    <link rel="NEXT" title="Simple Server Printcap Example" href=
    "cm.htm">
  </head>

  <body class="SECT1" bgcolor="#FFFFFF" text="#000000" link=
  "#0000FF" vlink="#840084" alink="#0000FF">
    <div class="NAVHEADER">
      <table summary="Header navigation table" width="100%" border=
      "0" cellpadding="0" cellspacing="0">
        <tr>
          <th colspan="3" align="center">LPRng-HOWTO: 1 Apr 2002
          (For LPRng-3.8.10)</th>
        </tr>

        <tr>
          <td width="10%" align="left" valign="bottom"><a href=
          "printcapref.htm" accesskey="P">Prev</a></td>

          <td width="80%" align="center" valign="bottom">Chapter
          12. Printcap Database</td>

          <td width="10%" align="right" valign="bottom"><a href=
          "cm.htm" accesskey="N">Next</a></td>
        </tr>
      </table>
      <hr align="LEFT" width="100%">
    </div>

    <div class="SECT1">
      <h1 class="SECT1"><a name="SIMPLE">12.2. Simple Client
      Printcap Entry</a></h1>

      <p>Options used:</p>

      <ul>
        <li>
          <p><tt class="LITERAL">client</tt> FLAG <i class=
          "EMPHASIS">client printcap entry</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">lp=</tt><i class=
          "EMPHASIS">destination printer information</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">rm=</tt><i class="EMPHASIS">remote
          host (machine)</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">rp=</tt><i class="EMPHASIS">remote
          printer</i></p>
        </li>
      </ul>
      <br>
      <br>

      <p>I'll use this simple example to explain the basics of the
      <b class="APPLICATION">LPRng</b> printcap format and
      introduce some of the <b class="APPLICATION">LPRng</b>
      network configuration options. Here is a simple printcap file
      used to provide client programs (<tt class="LITERAL">lpr,
      lprm,</tt> etc) with <i class="EMPHASIS">remote printer</i>
      and <i class="EMPHASIS">server</i> information.</p>

      <div class="INFORMALEXAMPLE">
        <a name="AEN5472"></a>
<pre class="SCREEN">
    # printer lp1
    lp1|printer1
      :rm=localhost
    # printer lp2 with continuation
    lp2:\
      :lp=pr@10.0.0.1:client
    # printcap lp3, to printer pr, with overrides
    lp3:rp=pr:rm=hp.private
      :force_localhost@
    # Simplest possible printcap entry - defaults for everything
    lp4
</pre>
      </div>

      <ol type="1">
        <li>
          <p>Lines starting with a <tt class="LITERAL">#</tt> sign
          are comments, and all leading and trailing <i class=
          "EMPHASIS">whitespace</i>, i.e. - spaces, tabs, etc, are
          ignored. Empty lines are ignored as well.</p>
        </li>

        <li>
          <p>A printcap entry starts with the printcap entry <i
          class="EMPHASIS">name</i>, followed by one or more <i
          class="EMPHASIS">aliases</i>, followed by one or more
          options. In the above example we have three printcap
          entries: <tt class="LITERAL">lp1</tt> with an alias <tt
          class="LITERAL">printer1</tt> and <tt class=
          "LITERAL">lp2</tt>, <tt class="LITERAL">lp3</tt>, and <tt
          class="LITERAL">lp4</tt> with no aliases.</p>
        </li>

        <li>
          <p>Aliases start with the <tt class="LITERAL">|</tt>
          character and options with the <tt class="LITERAL">:</tt>
          character; tabs and spaces before and after the <tt
          class="LITERAL">|</tt> or <tt class="LITERAL">:</tt>
          characters and at the start and end of lines are ignored.
          You can use backslash (<tt class="LITERAL">\</tt>) at the
          end of a line to create a multi-line value for an option.
          The backslash will cause the next line to be appended to
          the current line; watch out for comments and ends of
          printcap entries if you use this facility. As you can see
          from the example, there is no <tt class=
          "LITERAL">Name</tt> printcap entry - this is part of the
          <tt class="LITERAL">cm</tt> option on the previous
          line.</p>
        </li>

        <li>
          <p>Options take the form of a keyword/value pair,
          i.e.-</p>

          <p class="LITERALLAYOUT">:option=value<br>
          :option#value&nbsp;&nbsp;&nbsp;(legacy,&nbsp;not&nbsp;advised&nbsp;for&nbsp;new&nbsp;systems)<br>

          :option<br>
          :option@</p>
          <br>
          <br>
        </li>

        <li>
          <p>Option names are case insensitive, but option values
          are not. While <tt class="LITERAL">Ts</tt> and <tt class=
          "LITERAL">ts</tt> are the same option name, <tt class=
          "LITERAL">ts=Testing</tt> and <tt class=
          "LITERAL">ts=testing</tt> have their case preserved. A
          string or integer value is specified by <tt class=
          "LITERAL">option=value</tt> or <tt class=
          "LITERAL">option#value</tt>.</p>
        </li>

        <li>
          <p>The use of the legacy <tt class=
          "LITERAL">option#value</tt> form is <span class=
          "ACRONYM">NOT</span> recommended as some preprocessors
          and database systems will treat <i class="EMPHASIS">#</i>
          as the start of a comment and delete the remainder of the
          line. This has caused great consternation for sysadmins
          who wonder why their NIS distributed printcap entries
          have been mysteriously truncated.</p>
        </li>

        <li>
          <p>If you want to set a string option to <i class=
          "EMPHASIS">empty</i> value, use <tt class=
          "LITERAL">option=</tt>. The <tt class=
          "LITERAL">option</tt> will set it to <tt class=
          "LITERAL">1</tt>. If an option value contains a colon,
          then use the C (or Perl or Tck/Tk) string escape <tt
          class="LITERAL">\072</tt> to represent the value.</p>
        </li>

        <li>
          <p>Boolean options are set TRUE (1) if no value follows
          the keyword and FALSE (0) by appending a <tt class=
          "LITERAL">@</tt>. For example <tt class="LITERAL">sh</tt>
          will set <tt class="LITERAL">sh</tt> to TRUE and <tt
          class="LITERAL">sh@</tt> to FALSE.</p>
        </li>
      </ol>
      <br>
      <br>

      <p>There may be multiple options on the same line, separated
      by colons.</p>

      <p>Now let's examine the first printcap entry in detail. It
      is reproduced here for convenience:</p>

      <div class="INFORMALEXAMPLE">
        <a name="AEN5528"></a>
<pre class="SCREEN">
    # printer lp1
    lp1|printer1
      :rm=localhost
</pre>
      </div>

      <ol type="1">
        <li>
          <p>We start with a comment, followed by the printcap
          entry name and and alias. Aliases are useful when you
          want to refer to a single printer or print queue by
          different names. This can be useful in advanced printcap
          and print queue setups. By default, the remote printer
          name is the printcap entry name.</p>
        </li>

        <li>
          <p>The <tt class="LITERAL">rm</tt> (remote machine or
          host) option specifies the name or IP address of the <b
          class="APPLICATION">lpd</b> host running <b class=
          "APPLICATION">lpd</b>. In this example the remote host is
          <tt class="LITERAL">localhost</tt> or the machine that
          the client is running on and we assume that the <b class=
          "APPLICATION">lpd</b> server is running on the localhost.
          Thus, we would communicate with printer <tt class=
          "LITERAL">lp1@localhost</tt>.</p>
        </li>
      </ol>
      <br>
      <br>

      <p>Let's look at the next printcap entry:</p>

      <div class="INFORMALEXAMPLE">
        <a name="AEN5542"></a>
<pre class="SCREEN">
    # printer lp2 with continuation
    lp2:\
      :lp=pr@10.0.0.1:client
</pre>
      </div>

      <ol type="1">
        <li>
          <p>The <tt class="LITERAL">lp2</tt> printcap entry
          illustrates the use (and abuse) of the <tt class=
          "LITERAL">\</tt> continuation. If you think about this,
          we have really defined a printcap entry of the form:</p>

          <div class="INFORMALEXAMPLE">
            <a name="AEN5549"></a>
<pre class="SCREEN">
    lp2: :lp=pr@10.0.0.1:client
</pre>
          </div>
          &#13;<br>
          <br>

          <p>Luckily, <b class="APPLICATION">LPRng</b> ignores
          empty options like <tt class="LITERAL">::</tt>. While it
          is strongly recommended that <tt class="LITERAL">\</tt>
          be avoided it may be necessary for compatibility with
          other system utilities.</p>
        </li>

        <li>
          <p>The <tt class="LITERAL">lp=pr@10.0.0.1</tt> literal is
          an alternate way to specify a remote queue and server. If
          the <tt class="LITERAL">force_localhost</tt> default is
          being used, then the <b class="APPLICATION">LPRng</b>
          clients will ignore the <tt class="LITERAL">10.0.0.1</tt>
          address and still connect to <tt class=
          "LITERAL">pr@localhost</tt>. There is further discussion
          about this in the next section.</p>
        </li>

        <li>
          <p>The <tt class="LITERAL">client</tt> option explicitly
          labels client only printcap information. The <b class=
          "APPLICATION">lpd</b> server will ignore any printcap
          with the <tt class="LITERAL">client</tt> option. When
          constructing complex printcaps, this option is used to
          keep ensure that you have consistent printcap
          information.</p>
        </li>
      </ol>
      The following printcap entry shows how to override the <tt
      class="LITERAL">force_localhost</tt> default, and force the
      <b class="APPLICATION">LPRng</b> clients to connect directly
      to a remote server: 

      <div class="INFORMALEXAMPLE">
        <a name="AEN5569"></a>
<pre class="SCREEN">
    lp3:rp=pr:rm=hp.private
      :force_localhost@
</pre>
      </div>

      <ol type="1">
        <li>
          <p>The <tt class="LITERAL">rp=</tt> (remote printer)
          remote print queue name to used when sending commands to
          the <b class="APPLICATION">lpd</b> print server.</p>
        </li>

        <li>
          <p>The <tt class="LITERAL">force_localhost@</tt> literal
          is an example of a <i class="EMPHASIS">flag</i> option.
          The <tt class="LITERAL">@</tt> sets the literal value to
          0 (false). We set <tt class=
          "LITERAL">force_localhost</tt> to false, which now allows
          the <b class="APPLICATION">LPRng</b> clients to connect
          directly to the specified remote printer. In this
          example, the <tt class="FILENAME">hp.private</tt> could
          be a HP LaserJet Printer with a JetDirect interface,
          which supports the RFC1179 protocol.</p>
        </li>

        <li>
          <p>One disadvantages of sending a job directly to a
          printer using the above method is that <b class=
          "APPLICATION">lpr</b> program will not terminate or exit
          until all of the files have been transferred to the
          printer, and this may take a long time as the printer
          processes the files as they are received.</p>
        </li>
      </ol>
      <br>
      <br>

      <p>Now let's look at the last printcap entry:</p>

      <div class="INFORMALEXAMPLE">
        <a name="AEN5588"></a>
<pre class="SCREEN">
    # Simplest possible printcap entry - defaults for everything
    lp4
</pre>
      </div>
      <br>
      <br>

      <p>The last example is the simplest possible printcap entry.
      This will cause <b class="APPLICATION">LPRng</b> clients to
      use the default values for everything. The printer will be
      <tt class="LITERAL">lp4</tt>, i.e. - the name of the
      printcap, and the server will be <tt class=
      "LITERAL">localhost</tt> if <tt class=
      "LITERAL">force_localhost</tt> is set, or the value of the
      <tt class="LITERAL">default_remote_host</tt> configuration
      option if it is not.</p>
    </div>

    <div class="NAVFOOTER">
      <hr align="LEFT" width="100%">

      <table summary="Footer navigation table" width="100%" border=
      "0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="33%" align="left" valign="top"><a href=
          "printcapref.htm" accesskey="P">Prev</a></td>

          <td width="34%" align="center" valign="top"><a href=
          "index.htm" accesskey="H">Home</a></td>

          <td width="33%" align="right" valign="top"><a href=
          "cm.htm" accesskey="N">Next</a></td>
        </tr>

        <tr>
          <td width="33%" align="left" valign="top">Printcap
          Database</td>

          <td width="34%" align="center" valign="top"><a href=
          "printcapref.htm" accesskey="U">Up</a></td>

          <td width="33%" align="right" valign="top">Simple Server
          Printcap Example</td>
        </tr>
      </table>
    </div>
  </body>
</html>

