<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <title>Printing Job Files &#13;</title>
    <meta name="GENERATOR" content=
    "Modular DocBook HTML Stylesheet Version 1.71 ">
    <link rel="HOME" title=" LPRng-HOWTO" href="index.htm">
    <link rel="UP" title="Job Processing" href="jobsteps.htm">
    <link rel="PREVIOUS" title="Printing Banners " href=
    "bannerprinting.htm">
    <link rel="NEXT" title="Printing Banner At End of Job " href=
    "x7309.htm">
  </head>

  <body class="SECT1" bgcolor="#FFFFFF" text="#000000" link=
  "#0000FF" vlink="#840084" alink="#0000FF">
    <div class="NAVHEADER">
      <table summary="Header navigation table" width="100%" border=
      "0" cellpadding="0" cellspacing="0">
        <tr>
          <th colspan="3" align="center">LPRng-HOWTO: 1 Apr 2002
          (For LPRng-3.8.10)</th>
        </tr>

        <tr>
          <td width="10%" align="left" valign="bottom"><a href=
          "bannerprinting.htm" accesskey="P">Prev</a></td>

          <td width="80%" align="center" valign="bottom">Chapter
          15. Job Processing</td>

          <td width="10%" align="right" valign="bottom"><a href=
          "x7309.htm" accesskey="N">Next</a></td>
        </tr>
      </table>
      <hr align="LEFT" width="100%">
    </div>

    <div class="SECT1">
      <h1 class="SECT1"><a name="PRINTINGJOB">15.6. Printing Job
      Files</a></h1>

      <p>Options used:</p>

      <ul>
        <li>
          <p><tt class="LITERAL">Xf=</tt><i class="EMPHASIS">Format
          Filter</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">sf</tt> FLAG <i class=
          "EMPHASIS">Suppress Form Feed Separators</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">if=</tt><i class=
          "EMPHASIS">Default F Format Filter</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">pr=</tt><i class="EMPHASIS">pr
          formatting program</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">send_job_rw_timeout=</tt> <i
          class="EMPHASIS">print job read/write timeout</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">send_query_rw_timeout=</tt> <i
          class="EMPHASIS">status query operation read/write
          timeout</i></p>
        </li>

        <li>
          <p><tt class="LITERAL">sf</tt> FLAG <i class=
          "EMPHASIS">Suppress form feed between job files</i></p>
        </li>
      </ul>
      <br>
      <br>

      <p>Sequence of Operations: for each job in listed in the
      control file, the following operations are done in turn.</p>

      <ol type="1">
        <li>
          <p>If there is an <tt class="LITERAL">:of</tt> filter
          present, the suspend string <tt class=
          "LITERAL">\031\001</tt> is written to of_fd and the no
          further action is taken until the of filter is
          suspended.</p>
        </li>

        <li>
          <p>The control file line for the job is examined, and the
          first letter of the data file specification is used as
          the format.</p>
        </li>

        <li>
          <p>If the format is <tt class="LITERAL">p</tt>, the job
          is first processed by the program specified by the <tt
          class="LITERAL">pr</tt> program, and the program output
          used as the print file.</p>
        </li>

        <li>
          <p>If the format is <tt class="LITERAL">f</tt>, <tt
          class="LITERAL">l</tt>, or <tt class="LITERAL">p</tt>
          then the <tt class="LITERAL">:if</tt> filter is used,
          otherwise the keyword <tt class="LITERAL">Xf</tt> is
          used. Note that certain formats such as <tt class=
          "LITERAL">p, a, l</tt>, may not be used as formats.</p>
        </li>

        <li>
          <p>The filter program is started with an appropriate set
          of command line options (see <a href=
          "filteroptions.htm">Filter Command Line Options and
          Environment Variables</a> ), and with its <span class=
          "ACRONYM">STDOUT</span> attached to the printing device
          (io_fd), <span class="ACRONYM">STDERR</span> to a pipe
          which results in the output being written to the status
          file, and file descriptor 3 to the accounting file or
          program. If debugging is enabled, then the <span class=
          "ACRONYM">STDERR</span> output is also written to the
          error log file (lf).</p>
        </li>

        <li>
          <p>When doing a read/write operation to a device or
          remote system, a timeout can be specified. When doing a
          print or job transfer operation, the <tt class=
          "LITERAL">send_job_rw_timeout</tt> value is used. When
          doing a status or query operation, the <tt class=
          "LITERAL">send_query_rw_timeout</tt> value is used. If a
          write or write operation does not complete within the
          specified timeout seconds, then we have an error
          condition and job processing or the query operation is
          terminated with JFAIL status. If the timeout value is 0,
          then no timeout is done.</p>
        </li>

        <li>
          <p><a name="ERRORCODES"></a> <b class=
          "APPLICATION">lpd</b> will then wait for the filter to
          exit. The following exit codes are used by <b class=
          "APPLICATION">lpd</b>:</p>

          <div class="INFORMALEXAMPLE">
            <a name="AEN7297"></a>
<pre class="SCREEN">
    Key      Value   Meaning
    JSUCC    0       Successful
    JFAIL    1, 32   Failed - retry later
    JABORT   2, 33   Abort - terminate queue processing
    JREMOVE  3, 34   Failed - remove job
    (Unused) 4, 35
    (Unused) 5, 36
    JHOLD    6, 37   Hold this job - reprint later
    JNOSPOOL 7, 38   No spooling to this queue
    JNOPRINT 8, 39   No printing from this queue
    JSIGNAL  9,  40   Killed by unrecognized signal
    JFAILNORETRY 10, 41 Failed, no retry
    Other            Abort - terminate queue processing
</pre>
          </div>
          <br>
          <br>
        </li>

        <li>
          <p>If the filter exit status was JSUCC (0), or no error
          indicated, then processing will continue otherwise the
          job termination takes (see <a href=
          "abnormalterm.htm">Abnormal Termination</a> ).</p>
        </li>

        <li>
          <p>If the <tt class="LITERAL">:of</tt> filter is present,
          then it is reactivated with a <tt class="COMMAND">kill
          -CONT</tt> signal.</p>
        </li>

        <li>
          <p>The the <tt class="LITERAL">sf</tt> (suppress FF print
          file separators ) is turned off a form feed is sent
          between each file of a job.</p>
        </li>
      </ol>
      <br>
      <br>
    </div>

    <div class="NAVFOOTER">
      <hr align="LEFT" width="100%">

      <table summary="Footer navigation table" width="100%" border=
      "0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="33%" align="left" valign="top"><a href=
          "bannerprinting.htm" accesskey="P">Prev</a></td>

          <td width="34%" align="center" valign="top"><a href=
          "index.htm" accesskey="H">Home</a></td>

          <td width="33%" align="right" valign="top"><a href=
          "x7309.htm" accesskey="N">Next</a></td>
        </tr>

        <tr>
          <td width="33%" align="left" valign="top">Printing
          Banners</td>

          <td width="34%" align="center" valign="top"><a href=
          "jobsteps.htm" accesskey="U">Up</a></td>

          <td width="33%" align="right" valign="top">Printing
          Banner At End of Job</td>
        </tr>
      </table>
    </div>
  </body>
</html>

