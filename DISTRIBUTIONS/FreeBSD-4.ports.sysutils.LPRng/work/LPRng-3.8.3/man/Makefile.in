###########################################################################
# LPRng - An Extended Print Spooler System
#
# Copyright 1988-1997 Patrick Powell, San Diego, California
#     papowell@sdsu.edu
# See LICENSE for conditions of use.
#
###########################################################################
# MODULE: UTILS/Makefile
# PURPOSE: generate utilities
# Makefile.in,v 3.7 1998/03/30 01:54:50 papowell Exp
########################################################################## 

# Manual pages installation Makefile.
#
SRC = @srcdir@
VPATH=${SRC}
INSTALL=@INSTALL@

# change MANEXT to .gz or .Z if you use compressed manpages.
MANEXT =

## fix up prefix to be a make variable
prefix = @prefix@
MAN =		@mandir@
SHELL =		@SHELL@

# Install man pages in compressed form.
# COMPRESS     = compression utility
# COMPRESS_DIR = man compressed directory
# COMPRESS_EXT = man extension for compressed files
COMPRESS_DIR=
COMPRESS_EXT=.gz
COMPRESS=gzip -c

all:

.PHONY: all clean install ci install.zman

CI=
CO=-kv
update:
	- for i in *.[0-9]; do \
		rcs -l ./$$i; \
		ci $(CI) -l -mUpdate -t-Initial ./$$i; \
	done;

	- VER=`cat ${SRC}/../VERSION`; \
	  for i in *.[0-9]; do \
		sed -e "s/^.ds VE.*/.ds VE $$VER/" ./$$i >/tmp/$$i; \
		cp /tmp/$$i ./$$i; \
	done;

	- for i in *.[0-9]; do \
		ci $(CI) -mUpdate -t-Initial ./$$i; \
		yes | co $(CO) ./$$i; \
	done

# Standard man install target.
#
install:
	for suffix in 1 2 3 4 5 6 7 8 ; do \
	  if ls ${SRC}/*.$${suffix} >/dev/null 2>&1 ; then \
	    if [ ! -d $(DESTDIR)$(MAN)/man$${suffix} ] ; then \
		    echo ${SRC}/mkinstalldirs $(DESTDIR)$(MAN)/man$${suffix}; \
		    ${SRC}/mkinstalldirs $(DESTDIR)$(MAN)/man$${suffix}; \
	    fi; \
	    for i in ${SRC}/*.$$suffix; do \
		echo   $(INSTALL) -m 644 $$i $(DESTDIR)$(MAN)/man$$suffix/`basename $$i`$(MANEXT); \
		$(INSTALL)   -m 644 $$i $(DESTDIR)$(MAN)/man$$suffix/`basename $$i`$(MANEXT); \
	    done; \
	  fi; \
	done;

uninstall:
	for suffix in 1 2 3 4 5 6 7 8 ; do \
	  if ls ${SRC}/*.$${suffix} >/dev/null 2>&1 ; then \
	    for i in ${SRC}/*.$$suffix; do \
		echo   rm $(DESTDIR)$(MAN)/man$$suffix/`basename $$i`$(MANEXT); \
		rm   $(DESTDIR)$(MAN)/man$$suffix/`basename $$i`$(MANEXT); \
	    done; \
	  fi; \
	done;
	
realclean mostlyclean distclean:: clean

clean::

TAGS info:

cifast ci:
	if test ! -d RCS ; then mkdir RCS; fi;
	checkin() { \
		(set +e; rcs -l $$1; exit 0); \
		ci $(CI) -l -u -f -mUpdate -t-Initial $$1; \
	}; \
	for i in *.[0-9] Makefile.in Makefile; do \
		checkin $$i; \
	done;
